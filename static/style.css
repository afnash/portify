:root{
  --bg:#0b0b0f;
  --fg:#e9eef5;
  --muted:#9aa6b2;
  --glass:rgba(255,255,255,.06);
  --accent:#7aa2ff;
  --accent2:#74ffe6;
  --bubble:#ffffff1a;
  --bubble-me:#74ffe61f;
  --dot-ok:#4ade80;
  --dot-bad:#ef4444;
}
.light{
  --bg:#f5f7fb;
  --fg:#121319;
  --muted:#566170;
  --glass:rgba(255,255,255,.6);
  --bubble:#0000000f;
  --bubble-me:#007aff1a;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--fg);
  font-family: -apple-system,BlinkMacSystemFont,"SF Pro",system-ui,Segoe UI,Roboto,Inter,Arial;
}
.wrap{height:100%;display:grid;place-items:center;padding:16px}
.card{
  width:min(880px,96vw);height:min(92vh,840px);
  background:var(--glass);backdrop-filter:saturate(180%) blur(20px);
  border:1px solid #ffffff26;border-radius:24px;
  box-shadow:0 20px 60px rgba(0,0,0,.35);
  display:grid;grid-template-rows:auto auto 1fr auto;gap:12px;padding:16px;
}

.topbar{display:flex;align-items:center;justify-content:space-between}
.title{font-weight:700;font-size:20px;letter-spacing:.3px}
.right{display:flex;gap:8px;align-items:center}

.iconbtn{
  all:unset;cursor:pointer;background:var(--bubble);
  padding:8px 10px;border-radius:12px
}
.primary{
  all:unset;background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#041014;padding:10px 14px;border-radius:12px;
  font-weight:700;cursor:pointer;box-shadow:0 10px 30px #0000003a
}
.primary.small{padding:6px 10px;font-size:14px}

.qr{display:grid;place-items:center;gap:6px;margin-top:2px}
.qr img{width:120px;height:120px;border-radius:16px;box-shadow:0 10px 30px #00000040}
.hint{font-size:12px;color:var(--muted)}

.feed{
  overflow:auto;display:grid;gap:10px;padding-right:6px;margin-top:4px
}
.bubble{
  max-width:78%;padding:10px 14px;border-radius:16px;background:var(--bubble);
  backdrop-filter:blur(6px);box-shadow:0 8px 24px #0000002a
}
.me{margin-left:auto;background:var(--bubble-me)}
.meta{font-size:12px;color:var(--muted);margin-bottom:4px}
.filelink{display:inline-flex;gap:8px;align-items:center;text-decoration:none;color:inherit;
  background:#ffffff12;border:1px solid #ffffff22;padding:8px 10px;border-radius:12px}
.preview{margin-top:8px;border-radius:12px;max-width:100%}

.composer {
  display: flex;
  gap: 10px;
  align-items: flex-end;   /* ✅ keep bottom aligned */
}
#msgBox {
  resize: none;
  border: none;
  border-radius: 14px;
  padding: 12px;
  background: #ffffff1a;
  color: var(--fg);
  
  height: 52px;          /* ✅ FIXED initial height */
  max-height: 120px;     /* ✅ prevent huge expansion */
  overflow-y: auto;
}

.actions{display:flex;gap:8px;align-items:flex-end}

.drop{
  display:none;margin-top:4px;text-align:center;border:1px dashed #ffffff2a;
  border-radius:14px;padding:10px;color:var(--muted);background:#00000022
}
.drop.show{display:block}

.dot{width:10px;height:10px;border-radius:50%}
.online{background:var(--dot-ok)}
.offline{background:var(--dot-bad)}
