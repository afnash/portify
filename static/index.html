<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Portify</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- PWA -->
  <link rel="manifest" href="static/manifest.json">
  <meta name="theme-color" content="#0b0b0f">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="icon" href="/static/assets/logo192.png">
  <link rel="apple-touch-icon" href="/static/assets/logo192.png">

  <link rel="stylesheet" href="/static/style.css">
  <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
</head>

<body>
  <!-- OTP LOCK OVERLAY -->
  <div id="lock" class="lock show">
    <div class="lock-card">
      <div class="lock-title">Secure Session</div>
      <div class="lock-sub">Enter 6-digit OTP to connect</div>
      <input id="otpInput" class="otp-input" inputmode="numeric" maxlength="6" placeholder="______" />
      <button id="otpBtn">Verify</button>
      <div id="otpError" class="lock-err" hidden>Invalid OTP. Try again.</div>
    </div>
  </div>

  <div class="wrap">
    <div class="card">

      <!-- Top bar -->
      <header class="topbar">
        <div class="brand">
          <img src="/static/assets/logo192.png" alt="" class="brand-logo">
          <span class="brand-name">Portify</span>
        </div>
        <div class="top-actions">
          <div id="netDot" class="dot offline" title="Disconnected"></div>
          <button id="themeBtn" class="iconbtn" title="Toggle theme">ðŸŒ—</button>
          <button id="stopBtn" class="iconbtn danger" title="End connection">â›”</button>
          <button id="installBtn" class="primary small" hidden>Install</button>
        </div>
      </header>

      <!-- Collapsible QR -->
      <section class="qr">
        <div class="qr-header">
          <div class="hint">Scan on your phone to connect</div>
          <button id="qrToggle" class="iconbtn caret" title="Collapse">â–¼</button>
        </div>
        <div id="qrBody" class="qr-body">
          <img src="/qrcode.png" alt="Scan" class="qr-img">
          <div id="ipLine" class="hint"></div>
        </div>
      </section>

      <!-- Messages -->
      <section id="feed" class="feed"></section>

      <!-- Composer -->
      <section class="composer">
        <textarea id="msgBox" placeholder="Messageâ€¦"></textarea>
        <div class="actions">
          <input type="file" id="fileInput" hidden multiple>
          <button id="fileBtn" class="iconbtn" title="Send files">ðŸ“Ž</button>
          <button id="sendBtn" class="primary">Send</button>
        </div>
      </section>

      <!-- Drag drop -->
      <div id="dropzone" class="drop">Drop files to sendâ€¦</div>

    </div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
